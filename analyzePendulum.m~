function analyzePendulum(sessionFile)
videoFPS = 240;
fid = fopen(sessionFile);
sessionInfo = textscan(fid,'%s%s%f','delimiter',',');
fclose(fid);

arduinoData = csvread(sessionInfo{1,1}{1},1,0);
vidRefStartTs = sessionInfo{1,3}(1)/videoFPS;
zAxis = convertAccToG(arduinoData(:,4));

nexfile = [sessionInfo{1,2}{1},'.nex'];
varname='Channel01a';
[n,ts] = nex_ts(nexfile, varname);
tArduino = vidRefStartTs + (arduinoData(:,1)-arduinoData(1,1))/1000;

zAxisDiff = diff(zAxis);
zDiffSpikes = [];
for ii=1:length(ts)
    if ts(ii) > max(tArduino)
        break;
    end
    arduinoIdx = find(tArduino < ts(ii),1,'last');
    if ~isempty(arduinoIdx)
        zDiffSpikes = [zDiffSpikes zAxisDiff(arduinoIdx)];
    end
end

figure;
h1 = histogram(zAxisDiff,100);
hold on;
h2 = histogram(zDiffSpikes,100);

figure;
bar(h1.Values-h2.Values)
% subplot(311);
% hist(zAxisDiff,100);
% xlim([-1 1]);
% title('zAxisDiff');
% 
% subplot(312);
% hist(zDiffSpikes,100);
% xlim([-1 1]);
% title('zDiffSpikes');
% 
% subplot(313);
% 
% xlim([-1 1]);
% title('zAxisDiff-zDiffSpikes');
